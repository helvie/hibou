{% extends 'base.html.twig' %}


    {% block stylesheets %}
        {{ parent() }}

        <style>

            /*.hamburger {*/
                /*z-index:81;*/
            /*}*/
            .contactForm1 {
                z-index:80;
            }
            .contactForm2 {
                z-index:80;
            }

        </style>

    {% endblock %}

    {% block logo %}

        <div class="headSection blueBlockHead";>

                {#<div class="container">#}
                <div class="content blueBlock">

                    <div class="blueHeadImg">
                        <img alt="..." src="../assets/img/logoBleu.png"/>
                    </div>

                </div>
            {#</div>#}
        </div>
    {% endblock %}

    {% block content %}

        <div class="section blueBlock section-our-team">
            <div class="container">
                <!--<div class="text-area">-->
                <h1>Nos références</h1>

                <div class="title-area">
                    <h2>Réalisation de sites</h2>
                    <div class="separator separator-danger">♦</div>

                </div>
                <p class="description">
                    Mauris id sagittis est. Integer a mauris nec augue cursus molestie. Vivamus ut lectus non felis condimentum tempor. Praesent efficitur semper congue. Duis nec nisi libero. Pellentesque aliquam quam nec massa faucibus, nec mollis dui maximus. Aliquam ornare et mi et convallis. Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Duis in elementum orci. Sed a tempor tortor. Nam massa nibh, placerat at leo et, tincidunt pretium ex. Phasellus lectus felis, pretium ut ornare et, pharetra ac turpis. Integer non aliquam tellus. Vestibulum malesuada sed magna vel pretium. Pellentesque posuere interdum lectus id consequat. Praesent aliquam justo a quam efficitur tempus.
                </p>
            </div>

            <div class="container">

                <div class="row">

                    <div class="col-md-4 col-md-offset-4 text-center" style="margin-bottom:50px;">

                        <div class="col-md-3 text-center"> <img alt="..." src="../assets/img/facebook.png" style="width:50px;height:50px"/></div>
                        <div class="col-md-3 text-center"> <img alt="..." src="../assets/img/instagram.png" style="width:50px;height:50px"/></div>
                        <div class="col-md-3 text-center"> <img alt="..." src="../assets/img/twitter.png" style="width:50px;height:50px"/></div>
                        <div class="col-md-3 text-center"> <img alt="..." src="../assets/img/linkedin.png" style="width:50px;height:50px"/></div>

                    </div>

                    <div class="col-md-4 text-center">
                        <div class="col-md-12 text-center" style="height:60px;">
                            <div style="width:400px;margin:auto;">
                                <button type="button" class="btn btn-fill btn-owl">
                                    Subscribe
                                </button>

                            </div>
                        </div>
                    </div>

                </div>

            </div>

            <div class="container" style="text-align:center;margin-top:100px;">

                <h2>Nous contacter</h2>

            </div>


            {%  set today = 'now'|date('l')%}
            {%  set thisHour = 'now'|date_modify("+1 hour")|date('H')%}


            {% if today == "Monday" %}
                {%  set
                    todayList = [0,1,2,3,4,5,7]
                %}
            {% elseif today == "Tuesday" %}
                {% set
                    todayList = [0,1,2,3,4,6,7]
                %}
            {% elseif today == "Wednesday" %}
                {% set
                    todayList = [0,1,2,3,5,6,7]
                %}
            {% elseif today == "Thursday" %}
                {% set
                    todayList = [0,1,2,4,5,6,7]
                %}
            {% elseif today == "Friday" %}
                {% set
                    todayList = [0,1,3,4,5,6,7]
                %}
            {% elseif today == "Saturday" %}
                {% set
                    todayList = [0,2,3,4,5,6,7]
                %}
            {% elseif today == "Sunday" %}
                {% set
                    todayList = [1,2,3,4,5,6,7]
                %}
            {% endif %}
            {#{{ form_start(formContactDisplay, {'attr': {'class': 'form-group'}} ) }}#}
            {#{{ form_end(formContactDisplay) }}#}



            <div class="container">
                <div class="formBlock contactForm1">
                    <div class="col-lg-6 col-md-6 col-sm-8 col-xs-10 col-lg-offset-3 col-md-offset-3 col-sm-offset-2 col-xs-offset-1">
                        <div class="card1">

                            <div class="card1-header card1-header-rose card1-header-icon">
                                <div class="card1-icon">
                                    <i class="material-icons" style="color:#113441">mail_outline</i>
                                </div>
                            </div>

                            <div class="card1-body ">

                                {{ form_start(formContactDisplay, {'attr': {'class': 'form-group'}} ) }}

                                <div>
                                    {{ form_widget(formContactDisplay.name, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formContactDisplay.name) }}
                                </div>

                                <div>
                                    {{ form_widget(formContactDisplay.email, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formContactDisplay.email) }}
                                </div>

                                <div>
                                    {{ form_widget(formContactDisplay.phone, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formContactDisplay.phone) }}
                                </div>

                                <div style = "background-color : #dddddd; padding: 20px 20px 0 20px;margin-bottom:20px;">

                                <div style="padding-top:15px;">

                                    <input type="radio" id="contactChoiceTel"
                                           name="contact" value="telephone" checked>
                                    <label for="contactChoiceTel">Téléphone</label>

                                    <input type="radio" id="contactChoiceMail"
                                           name="contact" value="email">
                                    <label for="contactChoiceMail">Email</label>

                                </div>

                                <div class="form-group contactSelect1">

                                    <select class="form-control menuSelect daysMenu"  id="formControlSelect1">

                                        <option value="" style="color:#ffbb00;" disabled selected>Jour où vous souhaitez être rappelé</option>


                                        {% for day in todayList %}

                                            {% if thisHour >=14 %}

                                                {% if not loop.first %}

                                                    <option class="option" value={{ day }}>{{ 'now'|date_modify("+"~day~" day")|localizeddate('full', 'none', 'locale')|capitalize }}</option>

                                                {% endif %}

                                            {% elseif thisHour < 14 %}

                                                <option value = {{ day }}>{{ 'now'|date_modify("+"~day~" day")|localizeddate('full', 'none', 'locale') }}</option>                                            {% endif %}

                                        {% endfor %}


                                    </select>

                                </div>

                                <div class="form-group contactSelect2">

                                    <select class="form-control menuSelect hoursMenu" id="formControlSelect2" >

                                        <option value= "" style="color:#ffbb00;" disabled selected>Choisissez un créneau horaire</option>
                                        <option value=1 id="hour8">Rappeler entre 8h et 10h</option>
                                        <option value=2 id="hour10">Rappeler entre 10h et 12h</option>
                                        <option value=2 id="hour14">Rappeler entre 14h et 16h</option>

                                    </select>

                                </div>

                                </div>

                                {{ form_row(formContactDisplay.information, {'attr': {'required': false, 'class' : 'form-control textarea',rows : "4", cols :"50", "placehoder" : "Votre message"}}) }}


                                <div>
                                    {{ form_row(formContactDisplay.quoteRequest, {'attr': {'required': false, 'class' : 'form-control'}}) }}
                                </div>

                                <div>
                                    {{ form_row(formContactDisplay.newsletterRequest, {'attr': {'required': false, 'class' : 'form-control'}}) }}
                                </div>

                                <div>
                                    {{ form_row(formContactDisplay.informationsRequest, {'attr': {'required': false, 'class' : 'form-control'}}) }}
                                </div>

                                <div>
                                    {{ form_row(formContactDisplay.archived, {'attr': {'required': false, 'class' : 'form-control'}}) }}
                                </div>

                                <div style="display:none;">
                                    {{ form_row(formContactDisplay.lastAction, {'attr': {'required': false, 'class' : 'form-control'}}) }}
                                </div>

                                <div>
                                    {{ form_row(formContactDisplay.lastActionDate, {'attr': {'required': false, 'class' : 'form-control'}}) }}
                                </div>

                                <div style="display:none;">
                                    {{ form_row(formContactDisplay.nextAction, {'attr': {'required': false, 'class' : 'form-control'}}) }}
                                </div>

                                <div class="col hiddenDiv" style="display:none;">

                                    {{ form_row(formContactDisplay.save, {'attr': {'class' : 'form-control btn btn-fill btn-rose btnContactSave'},'label': 'Valider'}) }}

                                    {{ form_widget(formContactDisplay.nextActionDate.day, {'attr': {'required': false, 'class' : 'date endDateDay form-control'}}) }}

                                    {{ form_widget(formContactDisplay.nextActionDate.month, {'attr': {'required': false, 'class' : 'date endDateMonth form-control'}}) }}

                                    {{ form_widget(formContactDisplay.nextActionDate.year, {'attr': {'required': false, 'class' : 'date endDateYear form-control'}}) }}

                                </div>

                                {{ form_end(formContactDisplay) }}
                                <button class="form-control btn btn-fill btn-rose validContactForm" style="width:125px;">Valider</button>


                            </div>



                        </div>
                    </div>
                </div>
            </div>

        </div>


        <div class="contactForm2" style="position:absolute; text-align:center; width:100%;" >
            <div class="container">
                <div class="formBlock contactForm2">
                    <div class="col-lg-6 col-md-6 col-sm-8 col-xs-10 col-lg-offset-3 col-md-offset-3 col-sm-offset-2 col-xs-offset-1">

                        <div class="card1 card2 ">

                            <h2>Demande de devis</h2>

                            <p style="margin-right:10px;margin-left:10px;">Nous vous recontacterons dans les meilleurs délais pour vous donner la meilleure expertise </p>

                            <div class="card1-header card1-header-rose card1-header-icon">
                                <div class="card1-icon devisForm">
                                    <i>Vos informations</i>
                                </div>
                            </div>

                            <div class="card1-body ">

                                {{ form_start(formQuote, {'attr': {'class': 'form-group'}} ) }}

                                <div class="form-group">
                                    {{ form_widget(formQuote.company, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.company) }}
                                </div>

                                <div class="form-group respCivility">
                                    {{ form_widget(formQuote.respCivility, {'attr': {'required': true, 'style':'display:inlineBlock','class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.respCivility) }}
                                </div>


                                <div class="form-group">
                                    {{ form_widget(formQuote.respName, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.respName) }}
                                </div>

                                <div>
                                    {{ form_widget(formQuote.prospect.email, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.prospect.email) }}
                                </div>


                                <div>
                                    {{ form_widget(formQuote.prospect.phone, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.prospect.phone) }}
                                </div>

                                <div>
                                    {{ form_widget(formQuote.siret, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.siret) }}
                                </div>


                                <div>
                                    {{ form_widget(formQuote.activity, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.activity) }}
                                </div>

                                <div>
                                    {{ form_widget(formQuote.route, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.route) }}
                                </div>

                                <div>
                                    {{ form_widget(formQuote.postalCode, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.postalCode) }}
                                </div>


                                <div>
                                    {{ form_widget(formQuote.locality, {'attr': {'required': true, 'class' : 'form-control'}}) }}
                                    {{ form_errors(formQuote.locality) }}
                                </div>

                                <div>

                                {{ form_row(formQuote.prospect.information, {'attr': {'required': false, 'class' :
                                    'form-control textarea',rows : "4", cols :"50", "placehoder" : "Votre message"}}) }}
                                </div>

                                {{ form_widget(formQuote.prospect, {'attr': {'required': true, 'class' : 'form-control', }}) }}


                            </div>




                            <div>

                                <div class="card1-footer ">
                                    {{ form_row(formQuote.save2, {'attr': {'class' : 'form-control btn btn-fill btn-rose'},'label': 'Valider'}) }}
                                </div>

                                {{ form_end(formQuote) }}

                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="section blueBlock section-our-team" style="height:300px;"></div>

        <div class="section beigeBlock section-our-team" style="height:1100px;"></div>




        </div>




    {% endblock %}

{% block javascripts %}

    {{ parent() }}
    <script src="assets/js/plugins/bootstrap-selectpicker.js" ></script>

    <script>

        var nextDate = "";

        //--------------------------------------------------------------------------------------------------------

        $("#prospect_information_company").on("blur", function() {
            console.log("perte focus");
            $("#prospect_information_prospect_name").val($("#prospect_information_company").val());
        });

        //---------------------------------------------------------------------------------------------------------


        Date.prototype.addDays = function(days) {
            this.setDate(this.getDate() + parseInt(days));
            return this;
        };

        //---------------------------------------------------------------------------------------------------------

        var tableMois = new Array(1,2,3,4,5,6,7,8,9,10,11,12);

        $("#prospect_lastAction").val(12);

        // nextDate = new Date();
        //
        // $("#formControlSelect2").change(function(){
        //     $("#prospect_nextAction").val($("#formControlSelect2").val());
        // });
        //
        // $("#prospect_nextActionDate_month").val(tableMois[nextDate.getMonth()]);
        // $("#prospect_nextActionDate_year").val(nextDate.getFullYear());
        // $("#prospect_nextActionDate_day").val(nextDate.getDate());
        // $("#prospect_nextAction").val(new Date());



        //----------------------------------------------------------------------------------------------------

        $(".hoursMenu").hide();

        var nextDate = new Date();
        var day = nextDate.getDay();
        var hour = nextDate.getHours();

        $(".validContactForm").on("click", function(){

            if($("#contactChoiceMail").prop('checked')) {

                numLastAction = 11;
                numNextAction = 6;

                console.log(nextDate);

            }

            else if($("#contactChoiceTel").prop('checked')){

                numLastAction = 12;
                numNextAction = $("#formControlSelect2").val();

                if($(".daysMenu").val() != 0 || day == 0) {

                    daysAdd = $(".daysMenu").val();
                    nextDate.addDays(daysAdd);

                    console.log(nextDate);
                }

            }

            $("#prospect_lastAction").val(numLastAction);
            $("#prospect_nextAction").val(numNextAction);
            $("#prospect_nextActionDate_month").val(tableMois[nextDate.getMonth()]);
            $("#prospect_nextActionDate_year").val(nextDate.getFullYear());
            $("#prospect_nextActionDate_day").val(nextDate.getDate());

            $(".btnContactSave").trigger("click");

            });


        $(".daysMenu").on("change", function() {

            $(".hoursMenu").show();

            console.log("days menu "+$(".daysMenu").val());

            if($(".daysMenu").val() == 0 && day != 0) {

                if (hour > 8) {$("#hour8").hide();}
                if (hour > 10) {$("#hour10").hide();}

            }

        })

        //--------------------------------------------------------------------------------------------------------



    </script>

{% endblock %}
